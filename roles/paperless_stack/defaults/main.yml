---
# defaults/main.yml â€” paperless_stack

# Project layout
paperless_stack_project_name: "paperless"
paperless_stack_stacks_dir: "/opt/stacks"
paperless_stack_dir: "{{ paperless_stack_stacks_dir }}/{{ paperless_stack_project_name }}"
paperless_stack_compose_filename: "docker-compose.yml"

# Core container settings
paperless_stack_restart_policy: "unless-stopped"
paperless_stack_timezone: "{{ site_timezone | default('UTC') }}"
paperless_stack_compose_pull: "always"

# Core service images (based on timothystewart6/paperless-stack)
paperless_stack_paperless_image: "ghcr.io/paperless-ngx/paperless-ngx:latest"
paperless_stack_postgres_image: "postgres:16"
paperless_stack_redis_image: "docker.io/library/redis:8"
paperless_stack_gotenberg_image: "docker.io/gotenberg/gotenberg:8.25"
paperless_stack_tika_image: "docker.io/apache/tika:latest"

# Optional AI service images (Ollama/OpenWebUI intentionally excluded)
paperless_stack_enable_ai: false
paperless_stack_paperless_ai_image: "clusterzx/paperless-ai:latest"
paperless_stack_paperless_gpt_image: "icereed/paperless-gpt:latest"

# Host ports
paperless_stack_paperless_port: 8000
paperless_stack_paperless_ai_port: 3000
paperless_stack_paperless_gpt_port: 3002

# Paperless application settings
paperless_stack_url: "https://docubot.{{ site_domain | default('local') }}"
paperless_stack_bootstrap_url: "http://127.0.0.1:{{ paperless_stack_paperless_port }}"
paperless_stack_admin_user: "{{ app_admin_user | default('admin') }}"
paperless_stack_admin_email: "{{ admin_email | default('admin@example.local') }}"
paperless_stack_admin_password: "{{ app_admin_user_pw | default(vault_app_admin_user_pw | default('')) }}"
paperless_stack_secret_key: "{{ vault_paperless_secret_key | default('') }}"

paperless_stack_db_name: "paperless"
paperless_stack_db_user: "paperless"
paperless_stack_db_password: "{{ vault_paperless_db_password | default('') }}"

paperless_stack_ocr_language: "eng"
# Optional Paperless filename format. Leave empty to use Paperless default behavior.
paperless_stack_filename_format: ""
paperless_stack_tika_enabled: true

# AI service settings (requires external AI endpoint when enabled)
paperless_stack_ai_provider: "ollama"
paperless_stack_ai_ollama_url: "http://ollama:11434"
paperless_stack_ai_model: "llama3.2:3b"
paperless_stack_ai_scan_interval: "*/30 * * * *"
paperless_stack_ai_rag_enabled: true

paperless_stack_gpt_llm_provider: "ollama"
paperless_stack_gpt_vision_provider: "ollama"
paperless_stack_gpt_model: "llama3.2:3b"
paperless_stack_gpt_vision_model: "minicpm-v:8b"
paperless_stack_gpt_context_length: "8192"
paperless_stack_gpt_token_limit: "1000"
paperless_stack_gpt_log_level: "INFO"
paperless_stack_paperless_username: "{{ paperless_stack_admin_user }}"

# Persistence directories
paperless_stack_dirs:
  - "{{ paperless_stack_dir }}"
  - "{{ paperless_stack_dir }}/paperless"
  - "{{ paperless_stack_dir }}/paperless/data"
  - "{{ paperless_stack_dir }}/paperless/media"
  - "{{ paperless_stack_dir }}/paperless/export"
  - "{{ paperless_stack_dir }}/paperless/consume"
  - "{{ paperless_stack_dir }}/postgres"
  - "{{ paperless_stack_dir }}/postgres/data"
  - "{{ paperless_stack_dir }}/redis"
  - "{{ paperless_stack_dir }}/redis/data"
  - "{{ paperless_stack_dir }}/paperless-ai"
  - "{{ paperless_stack_dir }}/paperless-ai/data"
  - "{{ paperless_stack_dir }}/paperless-gpt"
  - "{{ paperless_stack_dir }}/paperless-gpt/prompts"

# Deploy behavior
paperless_stack_wait_for_paperless: true
paperless_stack_wait_retries: 30
paperless_stack_wait_delay: 5
